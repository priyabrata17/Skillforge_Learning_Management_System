<% layout("layouts/boilerplateAdminPanel") %>

<body>
  <div class="container-fluid">

    <!-- Page Heading -->
    <h1 class="h3 mb-2 text-gray-800">All Features</h1>
    <p class="mb-4">Manage all feature data displayed on the website.</p>

    <!-- Card -->
    <div class="card shadow mb-4">

      <!-- Header -->
      <div class="card-header py-3 d-flex justify-content-between align-items-center">
        <h6 class="m-0 font-weight-bold text-primary">Features List</h6>

        <!-- Add New -->
        <a href="/admin/create-feature-page" class="btn btn-sm btn-info">
          <i class="fas fa-plus"></i> Add New Feature
        </a>
      </div>

      <!-- Body -->
      <div class="card-body">
        <div class="table-responsive">

          <table class="table table-bordered table-hover align-middle" width="100%" cellspacing="0">
            <thead class="thead-light">
              <tr>
                <th>SN</th>
                <th>Image</th>
                <th>Feature 1</th>
                <th>Feature 2</th>
                <th>Feature 3</th>
                <th>Feature 4</th>
                <th class="text-center">Actions</th>
              </tr>
            </thead>

            <tbody>
              <% if (features && features.length > 0) { %>
              <% features.forEach((feature, index) => { %>

              <tr>
                <td><%= index + 1 %></td>

                <!-- IMAGE -->
                <td class="text-center">
                  <img src="<%= feature.image?.url || '/img/default.png' %>" alt="feature"
                    style="width:60px; height:60px; border-radius:6px; object-fit:cover;">
                </td>

                <!-- Feature Columns -->
                <td>
                  <strong><%= feature.titleOne %></strong><br>
                  <small><%= feature.descriptionOne %></small>
                </td>

                <td>
                  <strong><%= feature.titleTwo %></strong><br>
                  <small><%= feature.descriptionTwo %></small>
                </td>

                <td>
                  <strong><%= feature.titleThree %></strong><br>
                  <small><%= feature.descriptionThree %></small>
                </td>

                <td>
                  <strong><%= feature.titleFour %></strong><br>
                  <small><%= feature.descriptionFour %></small>
                </td>

                <!-- ACTION BUTTONS -->
                <td class="text-center">
                  <a href="/admin/update-feature-page/<%= feature._id %>"
                    class="btn btn-sm btn-primary mr-1 mb-2">
                    <i class="fas fa-edit"></i> Edit
                  </a>

                  <button class="btn btn-sm btn-danger d-inline-flex align-items-center mb-2" data-toggle="modal"
                    data-target="#deleteFeatureModal_<%= feature._id %>">
                    <i class="fas fa-trash-alt"></i> Delete
                  </button>
                </td>
              </tr>

              <% }) %>
              <% } else { %>
              <tr>
                <td colspan="7" class="text-center text-muted">No feature data found.</td>
              </tr>
              <% } %>
            </tbody>

          </table>

        </div>
      </div>
    </div>

    <!-- ============================
      DELETE CONFIRMATION MODALS
    ============================ -->
    <% if (features && features.length > 0) { %>
    <% features.forEach((feature) => { %>

    <div class="modal fade" id="deleteFeatureModal_<%= feature._id %>" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">

          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title">Delete Feature</h5>
            <button type="button" class="close text-white" data-dismiss="modal">
              <span>&times;</span>
            </button>
          </div>

          <div class="modal-body">
            Are you sure you want to delete this feature?
            <br>This action cannot be undone.
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

            <form action="/admin/delete/feature/<%= feature._id %>?_method=DELETE" method="POST">
              <button type="submit" class="btn btn-danger">Yes, Delete</button>
            </form>
          </div>

        </div>
      </div>
    </div>

    <% }) %>
    <% } %>

  </div>
</body>
